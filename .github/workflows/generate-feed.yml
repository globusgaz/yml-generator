name: üõí Generate Prom Feed

on:
  schedule:
    - cron: '0 * * * *'  # –©–æ–≥–æ–¥–∏–Ω–∏, –Ω–∞ –ø–æ—á–∞—Ç–∫—É –∫–æ–∂–Ω–æ—ó –≥–æ–¥–∏–Ω–∏ (UTC)
  workflow_dispatch:     # –ú–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –≤—Ä—É—á–Ω—É

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: üì• –ö–ª–æ–Ω—É—é —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
      uses: actions/checkout@v3

    - name: üêç –í—Å—Ç–∞–Ω–æ–≤–ª—é—é Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª—é—é –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
      run: pip install lxml requests

    - name: üöÄ –ó–∞–ø—É—Å–∫–∞—é –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é YML
      run: python main.py

    - name: üì§ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—é output.yml —è–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç
      uses: actions/upload-artifact@v3
      with:
        name: prom-feed
        path: output.yml
